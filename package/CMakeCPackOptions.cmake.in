
set(CPACK_PACKAGE_NAME "txvc")
set(CPACK_PACKAGE_VERSION @TXVC_VERSION@)
set(CPACK_PACKAGE_CONTACT "Sergey Guralnik <2010serhio@gmail.com>")

if (CPACK_GENERATOR STREQUAL "DEB")
    # XXX This is wrong if crosscompiling or using -march
    execute_process(COMMAND dpkg --print-architecture
        OUTPUT_VARIABLE CPACK_DEBIAN_PACKAGE_ARCHITECTURE
        OUTPUT_STRIP_TRAILING_WHITESPACE)
    set(CPACK_DEBIAN_PACKAGE_DEPENDS
        "udev (>= 229), libftdi1-2 (>= 1.4), libc6 (>= 2.23)")
    set(CPACK_DEBIAN_PACKAGE_HOMEPAGE @CMAKE_PROJECT_HOMEPAGE_URL@)
    set(CPACK_DEBIAN_PACKAGE_CONTROL_EXTRA
        @CMAKE_CURRENT_LIST_DIR@/deb/postinst)
    set(CPACK_PACKAGE_FILE_NAME
        ${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION}-${CPACK_DEBIAN_PACKAGE_ARCHITECTURE})
    # Leave a marker file for CI to easily locate just built DEB
    file(WRITE @CMAKE_BINARY_DIR@/deb-package-name "${CPACK_PACKAGE_FILE_NAME}.deb")
endif()

